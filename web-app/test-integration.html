<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Test</title>
</head>
<body>
    <h1>Integration Test</h1>
    <div id="output"></div>
    
    <script src="cursor-agent-mock.js"></script>
    <script src="modules/ProjectDataManager.js"></script>
    <script>
        async function testIntegration() {
            const output = document.getElementById('output');
            
            try {
                output.innerHTML = '<p>Testing integration...</p>';
                
                // Test 1: Check if CursorAgentMock is available
                if (typeof CursorAgentMock === 'undefined') {
                    throw new Error('CursorAgentMock not found');
                }
                output.innerHTML += '<p>‚úì CursorAgentMock loaded successfully</p>';
                
                // Test 2: Check if ProjectDataManager is available
                if (typeof ProjectDataManager === 'undefined') {
                    throw new Error('ProjectDataManager not found');
                }
                output.innerHTML += '<p>‚úì ProjectDataManager loaded successfully</p>';
                
                // Test 3: Initialize CursorAgentMock
                const cursorAgent = new CursorAgentMock();
                await cursorAgent.initialize();
                output.innerHTML += '<p>‚úì CursorAgentMock initialized successfully</p>';
                
                // Test 4: Initialize ProjectDataManager
                const projectDataManager = new ProjectDataManager();
                await projectDataManager.initialize();
                output.innerHTML += '<p>‚úì ProjectDataManager initialized successfully</p>';
                
                // Test 5: Test getting project data
                const projectData = projectDataManager.getProjectData('DIYAPP');
                if (projectData) {
                    output.innerHTML += `<p>‚úì Project data retrieved successfully</p>`;
                    output.innerHTML += `<p>Project: ${projectData.name}</p>`;
                    output.innerHTML += `<p>Description: ${projectData.description}</p>`;
                    output.innerHTML += `<p>Tasks: ${projectData.tasks.completed.length} completed, ${projectData.tasks.inProgress.length} in-progress, ${projectData.tasks.pending.length} pending</p>`;
                } else {
                    throw new Error('Failed to get project data');
                }
                
                output.innerHTML += '<p style="color: green; font-weight: bold;">üéâ All tests passed! Integration is working correctly.</p>';
                
            } catch (error) {
                output.innerHTML += `<p style="color: red; font-weight: bold;">‚ùå Test failed: ${error.message}</p>`;
                console.error('Integration test failed:', error);
            }
        }
        
        // Run the test when the page loads
        document.addEventListener('DOMContentLoaded', testIntegration);
    </script>
</body>
</html>
